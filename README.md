# Core-JavaScript-Fundamentals


#Closures & Scope

### **تفاوت `var`، `let` و `const` در جاوا اسکریپت**  

در جاوا اسکریپت، برای تعریف متغیرها از `var`، `let` و `const` استفاده می‌شود. اما این سه تفاوت‌هایی در **حوزه‌ی دسترسی (Scope)**، **هوئیستینگ (Hoisting)** و **قابلیت تغییر مقدار (Reassignment)** دارند.  

---

## **1. تفاوت در حوزه‌ی دسترسی (Scope)**  

### **🔹 `var` – دارای حوزه‌ی **تابع (Function Scope)****  
- متغیرهای تعریف شده با `var` فقط در داخل تابعی که در آن تعریف شده‌اند، قابل دسترسی هستند.  
- اگر `var` را بیرون از یک تابع تعریف کنید، به یک **متغیر سراسری (Global Variable)** تبدیل می‌شود.  
- `var` **دارای حوزه‌ی بلاک نیست**، یعنی درون `{}` (مثل `if` یا `for`) محدود نمی‌شود.  

✅ **مثال: `var` به بلاک محدود نمی‌شود**  
```js
function testVar() {
    if (true) {
        var x = 10;  // `x` داخل این بلاک تعریف شده
    }
    console.log(x); // ✅ اما همچنان در دسترس است!
}
testVar();
```
🚨 **مشکل:** متغیرهای `var` ممکن است ناخواسته از بلاک خارج شوند و باعث خطا شوند.  

---

### **🔹 `let` – دارای حوزه‌ی **بلاک (Block Scope)****  
- `let` **فقط در همان بلاک `{}` که تعریف شده قابل دسترسی است**.  
- برخلاف `var`، مقدار آن **خارج از بلاک در دسترس نیست**.  

✅ **مثال: `let` محدود به بلاک است**  
```js
function testLet() {
    if (true) {
        let y = 20; // `y` فقط داخل این بلاک در دسترس است
    }
    console.log(y); // ❌ خطا: y تعریف نشده است
}
testLet();
```
🚀 **نتیجه:** `let` از نشت متغیرها جلوگیری می‌کند و از `var` امن‌تر است.  

---

### **🔹 `const` – دارای حوزه‌ی بلاک و مقدار تغییرناپذیر**  
- `const` مانند `let` **در همان بلاک `{}` محدود می‌شود**.  
- اما **نمی‌توان مقدار آن را تغییر داد** پس یک **متغیر ثابت** است.  
- **نکته:** **اگر `const` یک آرایه یا شیء باشد، محتوای داخل آن می‌تواند تغییر کند!**  

✅ **مثال: `const` مقدارش تغییر نمی‌کند، اما شیء داخل آن بله!**  
```js
const z = 30;
z = 40; // ❌ خطا: مقدار ثابت تغییر نمی‌کند

const person = { name: "Ali" };
person.name = "Reza"; // ✅ شیء داخل `const` را می‌توان تغییر داد
console.log(person.name); // "Reza"
```

---

## **2. تفاوت در هوئیستینگ (Hoisting)**  
### **🔹 `var` هوئیست می‌شود اما مقدار اولیه `undefined` است**  
- متغیرهای `var` هنگام اجرا **به بالای کد برده می‌شوند (Hoisting)** ولی مقدار اولیه ندارند.  

✅ **مثال: `var` هوئیست می‌شود ولی مقدارش `undefined` است**  
```js
console.log(a); // undefined (نه خطا، ولی مقدار ندارد)
var a = 5;
```

### **🔹 `let` و `const` هوئیست می‌شوند اما مقداردهی نمی‌شوند**  
- این دو نیز **به بالا برده می‌شوند اما قبل از مقداردهی قابل استفاده نیستند**.  
- این وضعیت **"منطقه‌ی مرده‌ی موقت" (Temporal Dead Zone - TDZ)** نامیده می‌شود.  

🚨 **مثال: `let` و `const` قبل از مقداردهی خطا می‌دهند**  
```js
console.log(b); // ❌ ReferenceError: Cannot access 'b' before initialization
let b = 10;
```

---

## **3. تفاوت در قابلیت تغییر مقدار (Reassignment)**
| نوع متغیر   | حوزه‌ی دسترسی (Scope) | هوئیست (Hoisting) | قابلیت تغییر مقدار | قابلیت تعریف دوباره |
|-------------|----------------------|-------------------|---------------------|--------------------|
| `var`       | تابع (Function)       | بله ✅             | بله ✅              | بله ✅             |
| `let`       | بلاک (Block)          | خیر ❌            | بله ✅              | خیر ❌            |
| `const`     | بلاک (Block)          | خیر ❌            | خیر ❌ (ولی اشیاء تغییر می‌کنند) | خیر ❌ |

---

## **🚀 نتیجه‌گیری: کدام را استفاده کنیم؟**
✅ **`const` را همیشه استفاده کنید** مگر این که نیاز به تغییر مقدار داشته باشید.  
✅ **`let` را زمانی استفاده کنید** که مقدار متغیر تغییر خواهد کرد.  
❌ **`var` را استفاده نکنید** مگر این که با کد قدیمی کار می‌کنید.  

